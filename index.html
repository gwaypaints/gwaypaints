<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gway Paints</title>
  <meta name="description" content="Gway Paints curb art — choose a design and contact to book." />

  <style>
    :root{
      --bg1:#0b0f1a;
      --bg2:#0a0b10;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.04);
      --stroke: rgba(255,255,255,.10);
      --text:#f2f2f7;
      --muted:#b9b9c7;
      --blue:#4aa3ff;
      --shadow: 0 18px 50px rgba(0,0,0,.45);
      --r: 18px;
      --r2: 26px;
      --gap: 14px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background: radial-gradient(900px 600px at 15% 0%, rgba(74,163,255,.10), transparent 60%),
                  radial-gradient(900px 600px at 85% 10%, rgba(255,74,95,.08), transparent 55%),
                  linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
      overflow-x:hidden;
    }

    /* ===== Header + Spray Banner (kept) ===== */
    header{
      position:sticky; top:0; z-index:25;
      backdrop-filter: blur(10px);
      background: rgba(0,0,0,.55);
      border-bottom:1px solid rgba(255,255,255,.12);
    }
    .banner{
      position:relative;
      overflow:hidden;
      padding:22px 16px;
      background:#000;
    }
    .banner::before{
      content:"";
      position:absolute; inset:-60px;
      background:
        radial-gradient(520px 220px at 18% 45%, rgba(74,163,255,.30), transparent 65%),
        radial-gradient(600px 240px at 45% 70%, rgba(255,74,95,.24), transparent 70%),
        radial-gradient(560px 240px at 72% 40%, rgba(53,208,127,.20), transparent 68%),
        radial-gradient(680px 280px at 88% 70%, rgba(255,255,255,.08), transparent 72%);
      opacity:.95;
      mix-blend-mode: screen;
      transform: rotate(-1deg);
      z-index:0;
    }
    .banner::after{
      content:"";
      position:absolute; inset:0;
      background-image:
        radial-gradient(circle, rgba(255,255,255,.22) 1px, transparent 1.6px),
        radial-gradient(circle, rgba(255,255,255,.14) 1px, transparent 2.2px),
        radial-gradient(circle, rgba(255,255,255,.10) 1px, transparent 2.8px);
      background-size: 14px 14px, 22px 22px, 34px 34px;
      background-position: 0 0, 7px 11px, 13px 5px;
      opacity:.22;
      mix-blend-mode: overlay;
      z-index:0;
      pointer-events:none;
    }
    .wrap{
      max-width:1200px;
      margin:0 auto;
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      position:relative;
      z-index:1;
    }
    .brand h1{
      margin:0;
      font-family: "Brush Script MT","Segoe Script","Comic Sans MS",cursive;
      font-size: clamp(30px, 4vw, 48px);
      line-height:1.05;
      text-shadow: 0 10px 26px rgba(0,0,0,.75);
    }
    .brand p{
      margin:6px 0 0;
      color:var(--muted);
      font-size: 13px;
    }
    .top-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }
    .btn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 14px;
      border-radius:999px;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      gap:10px;
      align-items:center;
      box-shadow: 0 10px 24px rgba(0,0,0,.25);
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      user-select:none;
      white-space:nowrap;
      font-weight:800;
      font-size: 14px;
    }

    /* ===== Layout ===== */
    main{
      max-width:1200px;
      margin:18px auto 64px;
      padding: 0 16px;
      display:grid;
      grid-template-columns: 1.7fr 1fr;
      gap: 16px;
      align-items:start;
    }
    @media (max-width: 980px){
      main{ grid-template-columns: 1fr; }
    }

    .panel{
      background: var(--panel);
      border:1px solid var(--stroke);
      border-radius: var(--r2);
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }
    .hd{
      padding:16px 16px 12px;
      border-bottom:1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, rgba(255,255,255,.05), transparent);
    }
    .hd h2{ margin:0; font-size:18px; letter-spacing:.2px; }
    .hd p{ margin:6px 0 0; color:var(--muted); font-size:13px; line-height:1.35; }
    .bd{ padding:14px 16px 16px; }

    /* ===== Main services carousel ===== */
    .carousel{ position:relative; padding-bottom: 12px; }
    .viewport{ overflow:hidden; border-radius: 18px; }
    .track{
      display:flex;
      gap: var(--gap);
      will-change: transform;
      transition: transform .28s ease;
      padding: 2px;
      touch-action: pan-y;
    }
    .slide{
      flex: 0 0 calc((100% - var(--gap)) / 2);
      min-width: calc((100% - var(--gap)) / 2);
    }
    @media (max-width: 680px){
      .slide{ flex-basis: 100%; min-width:100%; }
    }

    .card{
      background: var(--panel2);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 18px;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:100%;
    }

    /* ===== Picture carousel inside each card ===== */
    .picCarousel{
      position:relative;
      aspect-ratio: 16/10;
      overflow:hidden;
      user-select:none;
      touch-action: pan-y;
      background: rgba(0,0,0,.15);
    }
    .picTrack{
      height:100%;
      display:flex;
      transition: transform .28s ease;
      will-change: transform;
    }
    .pic{
      flex: 0 0 100%;
      height:100%;
      position:relative;
      display:flex;
      align-items:flex-end;
      padding:12px;
    }

    /* Placeholder example looks (2 each) */
    .ex-plain-1{ background:
      radial-gradient(580px 220px at 20% 20%, rgba(74,163,255,.22), transparent 58%),
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .ex-plain-2{ background:
      radial-gradient(560px 220px at 75% 40%, rgba(255,255,255,.10), transparent 62%),
      radial-gradient(520px 220px at 25% 60%, rgba(53,208,127,.14), transparent 62%),
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }

    .ex-tx-1{ background:
      radial-gradient(620px 240px at 25% 35%, rgba(255,74,95,.20), transparent 58%),
      radial-gradient(520px 220px at 75% 45%, rgba(74,163,255,.18), transparent 58%),
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .ex-tx-2{ background:
      radial-gradient(680px 260px at 60% 35%, rgba(74,163,255,.18), transparent 60%),
      radial-gradient(540px 240px at 30% 60%, rgba(255,74,95,.16), transparent 62%),
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }

    .ex-twins-1{ background:
      radial-gradient(620px 240px at 25% 30%, rgba(53,208,127,.16), transparent 60%),
      radial-gradient(520px 220px at 80% 50%, rgba(255,255,255,.08), transparent 62%),
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .ex-twins-2{ background:
      radial-gradient(620px 240px at 70% 35%, rgba(53,208,127,.14), transparent 62%),
      radial-gradient(520px 220px at 28% 55%, rgba(74,163,255,.12), transparent 62%),
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }

    .ex-us-1{ background:
      radial-gradient(650px 260px at 30% 40%, rgba(74,163,255,.18), transparent 60%),
      radial-gradient(520px 220px at 78% 55%, rgba(255,74,95,.15), transparent 62%),
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .ex-us-2{ background:
      radial-gradient(700px 280px at 60% 35%, rgba(255,74,95,.16), transparent 62%),
      radial-gradient(540px 240px at 25% 60%, rgba(255,255,255,.10), transparent 64%),
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }

    .ex-top-1{ background:
      radial-gradient(640px 240px at 30% 35%, rgba(74,163,255,.16), transparent 60%),
      radial-gradient(520px 220px at 75% 55%, rgba(255,74,95,.13), transparent 62%),
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    .ex-top-2{ background:
      radial-gradient(640px 240px at 70% 35%, rgba(255,74,95,.14), transparent 62%),
      radial-gradient(520px 220px at 30% 55%, rgba(74,163,255,.12), transparent 62%),
      linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }

    .tag{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.45);
      font-size:12px;
      color:var(--muted);
      backdrop-filter: blur(6px);
      position:relative;
      z-index:2;
    }
    .tag b{ color:var(--text); }

    .picDots{
      position:absolute;
      left:0; right:0; bottom:8px;
      display:flex;
      justify-content:center;
      gap:8px;
      z-index:3;
      pointer-events:auto;
    }
    .picDot{
      width:7px; height:7px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.10);
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .picDot.active{
      background: rgba(74,163,255,.55);
      border-color: rgba(74,163,255,.75);
      transform: scale(1.15);
    }

    .content{
      padding:12px 12px 14px;
      display:flex;
      flex-direction:column;
      gap:10px;
      height:100%;
    }
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .name{ margin:0; font-weight:900; letter-spacing:.2px; font-size:16px; }
    .desc{ margin:0; color:var(--muted); font-size:13px; line-height:1.35; }
    .price{ font-weight:950; color:var(--blue); font-size:16px; }

    .select,.qty,.input,textarea{
      width:100%;
      padding:10px 10px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.30);
      color:var(--text);
      outline:none;
    }
    textarea{ min-height: 90px; resize:vertical; }
    .addbtn{
      width:100%;
      border:none;
      border-radius:14px;
      padding:11px 12px;
      cursor:pointer;
      font-weight:900;
      color:#071018;
      background: linear-gradient(135deg, rgba(74,163,255,.95), rgba(120,220,255,.75));
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
      transition: transform .12s ease, filter .12s ease;
    }
    .addbtn:hover{ transform: translateY(-1px); filter: brightness(1.02); }

    .dots{
      display:flex;
      justify-content:center;
      gap:8px;
      padding: 10px 0 0;
      user-select:none;
    }
    .dot{
      width:7px; height:7px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.10);
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .dot.active{
      background: rgba(74,163,255,.55);
      border-color: rgba(74,163,255,.75);
      transform: scale(1.15);
    }

    .addons{ display:grid; gap:10px; }
    .addon{
      display:flex;
      gap:12px;
      align-items:flex-start;
      padding:12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .icon{
      width:38px; height:38px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      display:flex; align-items:center; justify-content:center;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .icon img{ width:100%; height:100%; object-fit:cover; }

    .cart{ position:sticky; top:92px; }
    .cartlist{ display:grid; gap:10px; }
    .cartitem{
      padding:12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      display:grid;
      gap:8px;
    }
    .cartitem .top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .cartitem .title{ font-weight:900; font-size:14px; line-height:1.25; }
    .cartitem .meta{ color:var(--muted); font-size:12px; line-height:1.35; margin-top:4px; }
    .x{
      border:none;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color:var(--text);
      border-radius:10px;
      padding:6px 9px;
      cursor:pointer;
      font-weight:900;
    }
    .totals{
      margin-top:12px;
      padding-top:12px;
      border-top:1px solid rgba(255,255,255,.10);
      display:grid;
      gap:6px;
      font-size:14px;
    }
    .totals .line{ display:flex; justify-content:space-between; gap:10px; }
    .totals .grand{ font-size:16px; font-weight:950; }
    .empty{ color:var(--muted); font-size:13px; padding: 6px 2px 2px; }
    .footnote{
      margin-top:10px;
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
      border-top:1px dashed rgba(255,255,255,.14);
      padding-top:10px;
    }

    .coming-soon{
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-size: 12px;
      line-height: 1.4;
    }
    .coming-soon b{ color: var(--text); }
    .coming-soon .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(74,163,255,.30);
      background: rgba(74,163,255,.10);
      color:#dff0ff;
      font-weight:850;
      margin-top:8px;
    }
  </style>
</head>

<body>
  <header>
    <div class="banner">
      <div class="wrap">
        <div class="brand">
          <h1>Gway Paints</h1>
          <p>Curb art • Pick a service • Add-ons optional</p>
        </div>

        <!-- ONLY total up top (no extra contact button) -->
        <div class="top-actions">
          <span class="btn" style="pointer-events:none;">Total: <b id="topTotal" style="color:var(--blue)">$0</b></span>
        </div>
      </div>
    </div>
  </header>

  <main>
    <!-- LEFT -->
    <section class="panel">
      <div class="hd">
        <h2>Choose your curb art</h2>
        <p>Swipe through services, and swipe each picture for <b>example looks</b>.</p>
      </div>

      <div class="bd">
        <div class="carousel" id="serviceCarousel">
          <div class="viewport">
            <div class="track" id="track">

              <!-- Plain -->
              <div class="slide">
                <article class="card" data-id="plain" data-name="Plain" data-price="20">
                  <div class="picCarousel" data-pic-carousel>
                    <div class="picTrack">
                      <div class="pic ex-plain-1"><span class="tag"><b>Plain</b> • Example 1</span></div>
                      <div class="pic ex-plain-2"><span class="tag"><b>Plain</b> • Example 2</span></div>
                    </div>
                    <div class="picDots"></div>
                  </div>
                  <div class="content">
                    <div class="row"><p class="name">Plain</p><span class="price">$20</span></div>
                    <p class="desc">Clean numbers + outline. Great if you want it simple and readable.</p>
                    <div class="row" style="gap:10px">
                      <input class="qty" type="number" min="1" value="1" />
                      <button class="addbtn">Add to cart</button>
                    </div>
                  </div>
                </article>
              </div>

              <!-- Texas Flag -->
              <div class="slide">
                <article class="card" data-id="txflag" data-name="Texas Flag" data-price="40">
                  <div class="picCarousel" data-pic-carousel>
                    <div class="picTrack">
                      <div class="pic ex-tx-1"><span class="tag"><b>Texas Flag</b> • Example 1</span></div>
                      <div class="pic ex-tx-2"><span class="tag"><b>Texas Flag</b> • Example 2</span></div>
                    </div>
                    <div class="picDots"></div>
                  </div>
                  <div class="content">
                    <div class="row"><p class="name">Texas Flag</p><span class="price">$40</span></div>
                    <p class="desc">Texas flag theme with strong contrast—stands out from the street.</p>
                    <div class="row" style="gap:10px">
                      <input class="qty" type="number" min="1" value="1" />
                      <button class="addbtn">Add to cart</button>
                    </div>
                  </div>
                </article>
              </div>

              <!-- Twin Stars -->
              <div class="slide">
                <article class="card" data-id="twinstars" data-name="Twin Stars" data-price="25">
                  <div class="picCarousel" data-pic-carousel>
                    <div class="picTrack">
                      <div class="pic ex-twins-1"><span class="tag"><b>Twin Stars</b> • Example 1</span></div>
                      <div class="pic ex-twins-2"><span class="tag"><b>Twin Stars</b> • Example 2</span></div>
                    </div>
                    <div class="picDots"></div>
                  </div>
                  <div class="content">
                    <div class="row"><p class="name">Twin Stars</p><span class="price">$25</span></div>
                    <p class="desc">Twin stars style with a bold look that still keeps numbers readable.</p>
                    <div class="row" style="gap:10px">
                      <input class="qty" type="number" min="1" value="1" />
                      <button class="addbtn">Add to cart</button>
                    </div>
                  </div>
                </article>
              </div>

              <!-- American Flag -->
              <div class="slide">
                <article class="card" data-id="usflag" data-name="American Flag" data-price="50">
                  <div class="picCarousel" data-pic-carousel>
                    <div class="picTrack">
                      <div class="pic ex-us-1"><span class="tag"><b>American Flag</b> • Example 1</span></div>
                      <div class="pic ex-us-2"><span class="tag"><b>American Flag</b> • Example 2</span></div>
                    </div>
                    <div class="picDots"></div>
                  </div>
                  <div class="content">
                    <div class="row"><p class="name">American Flag</p><span class="price">$50</span></div>
                    <p class="desc">American flag theme with bold presence and clean readability.</p>
                    <div class="row" style="gap:10px">
                      <input class="qty" type="number" min="1" value="1" />
                      <button class="addbtn">Add to cart</button>
                    </div>
                  </div>
                </article>
              </div>

              <!-- Topside Curb Art -->
              <div class="slide">
                <article class="card" data-id="topside" data-name="Topside Curb Art" data-price="50">
                  <div class="picCarousel" data-pic-carousel>
                    <div class="picTrack">
                      <div class="pic ex-top-1"><span class="tag"><b>Topside</b> • Example 1</span></div>
                      <div class="pic ex-top-2"><span class="tag"><b>Topside</b> • Example 2</span></div>
                    </div>
                    <div class="picDots"></div>
                  </div>
                  <div class="content">
                    <div class="row"><p class="name">Topside Curb Art</p><span class="price">$50</span></div>
                    <p class="desc"><b>Disclaimer:</b> This option is <b>one side only</b> for the topside. Choose a style:</p>
                    <select class="select variant">
                      <option value="Texas Flag">Texas Flag</option>
                      <option value="American Flag">American Flag</option>
                    </select>
                    <div class="row" style="gap:10px">
                      <input class="qty" type="number" min="1" value="1" />
                      <button class="addbtn">Add to cart</button>
                    </div>
                  </div>
                </article>
              </div>

            </div>
          </div>

          <div class="dots" id="dots" aria-label="Carousel page indicators"></div>
        </div>

        <div style="height:14px"></div>

        <!-- Add-ons -->
        <div class="panel" style="background:transparent;border:none;box-shadow:none;">
          <div class="hd" style="border:1px solid var(--stroke);border-radius:var(--r2); background: rgba(255,255,255,.04);">
            <h2>Add-ons</h2>
            <p>These apply to your order total.</p>
          </div>
          <div class="bd" style="padding:14px 0 0;">
            <div class="addons">
              <div class="addon">
                <div class="icon">
                  <img alt="Border add-on preview" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect x='10' y='10' width='44' height='44' rx='8' fill='%23000000'/%3E%3Crect x='14' y='14' width='36' height='36' rx='6' fill='none' stroke='%234aa3ff' stroke-width='4'/%3E%3C/svg%3E" />
                </div>
                <div style="flex:1 1 auto;">
                  <label style="font-weight:850;">Border <span style="color:var(--blue);font-weight:950;">+$5</span></label>
                  <div style="color:var(--muted);font-size:13px;line-height:1.35;">Adds a clean border around the art for extra definition.</div>
                  <div style="margin-top:8px;">
                    <label style="display:flex;gap:10px;align-items:center;color:var(--muted);font-size:12px;">
                      <input type="checkbox" id="addonBorder" />
                      Add Border to cart
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div style="height:14px"></div>

        <!-- Notes -->
        <div class="panel" style="background:transparent;border:none;box-shadow:none;">
          <div class="hd" style="border:1px solid var(--stroke);border-radius:var(--r2); background: rgba(255,255,255,.04);">
            <h2>Quotes / Special Requests</h2>
            <p>If you want something custom, type details here. It will be included in your text message.</p>
          </div>
          <div class="bd" style="padding:14px 0 0;">
            <input class="input" id="addressInput" placeholder="Address or cross streets (optional)" />
            <div style="height:10px"></div>
            <textarea id="notesInput" placeholder="Notes (colors, house number, timing, special request, etc.)"></textarea>
          </div>
        </div>
      </div>
    </section>

    <!-- RIGHT -->
    <aside class="panel cart">
      <div class="hd">
        <h2>Your cart</h2>
        <p>When you’re ready, tap <b>Contact Now</b> to send your order.</p>
      </div>
      <div class="bd">
        <div id="cartList" class="cartlist"></div>
        <div id="cartEmpty" class="empty">Cart is empty — add a service to get started.</div>

        <div class="totals">
          <div class="line"><span>Subtotal</span><b id="subtotal">$0</b></div>
          <div class="line"><span>Add-ons</span><b id="addonsTotal">$0</b></div>
          <div class="line grand"><span>Total</span><b id="grandTotal" style="color:var(--blue)">$0</b></div>
        </div>

        <div style="height:12px"></div>

        <!-- ONLY checkout contact button -->
        <a class="btn primary" id="contactNow" href="#" style="width:100%;justify-content:center;">
          Contact Now
        </a>

        <!-- Coming soon note -->
        <div class="coming-soon">
          <b>Coming Soon Deal:</b> Items marked as <b>“Coming Soon”</b> are <b>50% off</b>.
          <div class="pill">You’ll add the “Coming Soon” labels later ✅</div>
        </div>

        <div class="footnote">
          No payment is collected on this page. Your order will open as a text message draft.
        </div>
      </div>
    </aside>
  </main>

  <script>
    // Phone number NEVER displayed — only used for sms: link.
    const PHONE_E164 = "+16828165741";

    const ADDONS = { border: { id:"border", name:"Border", price:5 } };
    const cart = []; // {id,name,price,qty,kind:'product'|'addon'}

    const fmt = n => "$" + (Math.round(n * 100) / 100).toFixed(0);
    const byId = id => document.getElementById(id);

    function upsertItem(item){
      const idx = cart.findIndex(x => x.id === item.id && x.kind === item.kind);
      if(idx >= 0) cart[idx].qty += item.qty;
      else cart.push(item);
      renderCart();
    }
    function setAddonInCart(addonId, enabled){
      const addon = ADDONS[addonId];
      if(!addon) return;
      const idx = cart.findIndex(x => x.id === addon.id && x.kind === "addon");
      if(enabled){
        if(idx >= 0) return;
        cart.push({ id:addon.id, name:addon.name, price:addon.price, qty:1, kind:"addon" });
      }else{
        if(idx >= 0) cart.splice(idx,1);
      }
    }
    function removeAt(i){ cart.splice(i,1); renderCart(); }
    function totals(){
      let sub = 0, add = 0;
      cart.forEach(it=>{
        const line = it.price * it.qty;
        if(it.kind === "addon") add += line; else sub += line;
      });
      return { sub, add, grand: sub + add };
    }
    function cartText(){
      const { sub, add, grand } = totals();
      const lines = [];
      lines.push("Gway Paints Order");
      lines.push("-----------------");
      if(cart.length === 0) lines.push("Cart: (empty)");
      else cart.forEach(it => lines.push(`${it.qty}x ${it.name} - ${fmt(it.price * it.qty)}`));
      lines.push("-----------------");
      lines.push(`Subtotal: ${fmt(sub)}`);
      lines.push(`Add-ons: ${fmt(add)}`);
      lines.push(`Total: ${fmt(grand)}`);

      const addr = byId("addressInput").value.trim();
      const notes = byId("notesInput").value.trim();
      if(addr) lines.push(`Address: ${addr}`);
      if(notes) lines.push(`Notes: ${notes}`);
      return lines.join("\n");
    }
    function makeSmsLink(){
      const body = encodeURIComponent(cartText());
      return `sms:${PHONE_E164}?&body=${body}`;
    }
    function updateContactLinks(){
      byId("contactNow").href = makeSmsLink();
    }
    function renderCart(){
      const list = byId("cartList");
      list.innerHTML = "";
      byId("cartEmpty").style.display = cart.length ? "none" : "block";

      cart.forEach((it, i)=>{
        const div = document.createElement("div");
        div.className = "cartitem";
        const isAddon = it.kind === "addon";
        div.innerHTML = `
          <div class="top">
            <div>
              <div class="title">${it.qty}x ${it.name}</div>
              <div class="meta">${isAddon ? "Add-on" : "Service"} • ${fmt(it.price)} each</div>
            </div>
            <button class="x" aria-label="Remove item">X</button>
          </div>
          <div class="row">
            <span style="color:var(--muted);font-size:13px;">Line total</span>
            <b style="color:${isAddon ? "var(--blue)" : "var(--text)"};">${fmt(it.price * it.qty)}</b>
          </div>
        `;
        div.querySelector(".x").addEventListener("click", ()=>removeAt(i));
        list.appendChild(div);
      });

      const t = totals();
      byId("subtotal").textContent = fmt(t.sub);
      byId("addonsTotal").textContent = fmt(t.add);
      byId("grandTotal").textContent = fmt(t.grand);
      byId("topTotal").textContent = fmt(t.grand);

      updateContactLinks();
    }

    // Wire product buttons (keeps topside variant)
    document.querySelectorAll(".card").forEach(card=>{
      const btn = card.querySelector(".addbtn");
      const qtyInput = card.querySelector(".qty");
      const variantSelect = card.querySelector(".variant");
      if(!btn) return;

      btn.addEventListener("click", ()=>{
        const baseId = card.dataset.id;
        const baseName = card.dataset.name;
        const price = Number(card.dataset.price);
        const qty = Math.max(1, Number(qtyInput?.value || 1));

        let finalId = baseId;
        let finalName = baseName;
        if(variantSelect){
          const v = variantSelect.value;
          finalId = `${baseId}_${v.toLowerCase().replace(/\s+/g,'_')}`;
          finalName = `${baseName} (${v})`;
        }
        upsertItem({ id: finalId, name: finalName, price, qty, kind:"product" });
      });
    });

    // Add-ons
    byId("addonBorder").addEventListener("change", (e)=>{
      setAddonInCart("border", e.target.checked);
      renderCart();
    });

    byId("addressInput").addEventListener("input", updateContactLinks);
    byId("notesInput").addEventListener("input", updateContactLinks);

    // ===== Main services carousel (2 per page) =====
    const track = byId("track");
    const dotsEl = byId("dots");
    const slides = Array.from(track.children);

    function perPage(){ return window.matchMedia("(max-width: 680px)").matches ? 1 : 2; }
    let page = 0;
    function pageCount(){ return Math.ceil(slides.length / perPage()); }
    function clampPage(p){ return Math.max(0, Math.min(p, pageCount()-1)); }
    function setPage(p, smooth=true){
      page = clampPage(p);
      track.style.transition = smooth ? "transform .28s ease" : "none";
      const vp = track.parentElement.getBoundingClientRect().width;
      track.style.transform = `translateX(${-page * vp}px)`;
      renderDots();
    }
    function renderDots(){
      const count = pageCount();
      dotsEl.innerHTML = "";
      for(let i=0;i<count;i++){
        const d = document.createElement("button");
        d.className = "dot" + (i===page ? " active" : "");
        d.type = "button";
        d.addEventListener("click", ()=>setPage(i,true));
        dotsEl.appendChild(d);
      }
    }

    // Drag / swipe main carousel
    let isDown=false, startX=0, startTransform=0;
    function currentTranslateX(el){
      const m = el.style.transform.match(/translateX\(([-0-9.]+)px\)/);
      return m ? Number(m[1]) : 0;
    }
    function onDown(clientX){
      isDown=true; startX=clientX; startTransform=currentTranslateX(track);
      track.style.transition="none";
    }
    function onMove(clientX){
      if(!isDown) return;
      const dx = clientX - startX;
      track.style.transform = `translateX(${startTransform + dx}px)`;
    }
    function onUp(clientX){
      if(!isDown) return;
      isDown=false;
      const dx = clientX - startX;
      const threshold = 60;
      if(dx < -threshold) setPage(page+1,true);
      else if(dx > threshold) setPage(page-1,true);
      else setPage(page,true);
    }
    const viewport = track.parentElement;
    viewport.addEventListener("touchstart", (e)=>onDown(e.touches[0].clientX), {passive:true});
    viewport.addEventListener("touchmove", (e)=>onMove(e.touches[0].clientX), {passive:true});
    viewport.addEventListener("touchend", (e)=>onUp((e.changedTouches[0]||e.touches[0])?.clientX ?? startX), {passive:true});
    viewport.addEventListener("mousedown", (e)=>{ e.preventDefault(); onDown(e.clientX); });
    window.addEventListener("mousemove", (e)=>onMove(e.clientX));
    window.addEventListener("mouseup", (e)=>onUp(e.clientX));
    window.addEventListener("resize", ()=>setPage(page,false));

    // ===== Picture carousels inside each card (2 examples) =====
    function initPicCarousel(root){
      const t = root.querySelector(".picTrack");
      const pics = Array.from(t.children);
      const dotsWrap = root.querySelector(".picDots");
      let idx = 0;

      function render(){
        t.style.transform = `translateX(${-idx * root.clientWidth}px)`;
        dotsWrap.innerHTML = "";
        for(let i=0;i<pics.length;i++){
          const b = document.createElement("button");
          b.type="button";
          b.className = "picDot" + (i===idx ? " active" : "");
          b.addEventListener("click", (e)=>{ e.stopPropagation(); idx=i; render(); });
          dotsWrap.appendChild(b);
        }
      }

      // Stop main carousel from moving when swiping pics
      const stop = (e)=>{ e.stopPropagation(); };

      let down=false, sx=0, start=0;
      function cur(){
        const m = t.style.transform.match(/translateX\(([-0-9.]+)px\)/);
        return m ? Number(m[1]) : 0;
      }
      function pd(x){
        down=true; sx=x; start=cur();
        t.style.transition="none";
      }
      function pm(x){
        if(!down) return;
        const dx = x - sx;
        t.style.transform = `translateX(${start + dx}px)`;
      }
      function pu(x){
        if(!down) return;
        down=false;
        const dx = x - sx;
        const threshold = 45;
        if(dx < -threshold) idx = Math.min(idx+1, pics.length-1);
        else if(dx > threshold) idx = Math.max(idx-1, 0);
        t.style.transition="transform .28s ease";
        render();
      }

      root.addEventListener("touchstart", (e)=>{ stop(e); pd(e.touches[0].clientX); }, {passive:true});
      root.addEventListener("touchmove", (e)=>{ stop(e); pm(e.touches[0].clientX); }, {passive:true});
      root.addEventListener("touchend", (e)=>{ stop(e); pu((e.changedTouches[0]||e.touches[0])?.clientX ?? sx); }, {passive:true});

      root.addEventListener("mousedown", (e)=>{ e.preventDefault(); stop(e); pd(e.clientX); });
      window.addEventListener("mousemove", (e)=>{ if(down) pm(e.clientX); });
      window.addEventListener("mouseup", (e)=>{ if(down) pu(e.clientX); });

      window.addEventListener("resize", ()=>{ t.style.transition="none"; render(); });

      t.style.transition="transform .28s ease";
      render();
    }

    document.querySelectorAll("[data-pic-carousel]").forEach(initPicCarousel);

    // Init
    renderDots();
    setPage(0,false);
    renderCart();
  </script>
</body>
</html>
